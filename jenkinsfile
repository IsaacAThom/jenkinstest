pipeline {
    agent any
    environment {
        DIRECTORY_PATH = 'C:/Users/incar/Documents/University/2024/SIT223 - Professional Practice/Code'
        TESTING_ENVIRONMENT = 'C:/Users/incar/AppData/Local/Jenkins/.jenkins/workspace/my_first_pipeline'
        PRODUCTION_ENVIRONMENT = 'Isaac McKissack'
    }

    stages {
        stage('Build') {
            steps {
                echo "Fetch the source code from source directory: ${DIRECTORY_PATH}"
                echo 'Compile the code and generate any necessary artifacts using {insert build automation tool here}'
            }
        }
        stage('Unit and Integration Tests') {
            steps {
                echo 'Test application using {insert test automation tool here}'
            }
            post{
                success{
                    mail to: 'isaac.an.thompson@gmail.com',
                    subject: 'Unit and Integration Test Status',
                    body: 'Unit and Integration testing was a success'
                }
                failure{
                    mail to: 'isaac.an.thompson@gmail.com',
                    subject: 'Unit and Integration Test Status',
                    body: 'Unit and Integrating testing was a failure'
                }
            }
        }
        stage('Code Analysis') {
            steps {
                echo 'Analyse code to ensure it meeds standards using {insert code analysis tool here}'
            }
        }
        stage('Security Scan') {
            steps {
                echo 'Perform a security scan using {insert security tool here}'
            }
            post{
                success{
                    mail to: 'isaac.an.thompson@gmail.com',
                    subject: 'Security Scan Status',
                    body: 'Security scanning was a success'
                }
                failure{
                    mail to: 'isaac.an.thompson@gmail.com',
                    subject: 'Security Scan Status',
                    body: 'Security scanning was a failure'
                }
            } 
        }
        stage('Deploy to Staging') {
            steps {
                echo 'Deploy to staging server hosted on {insert staging server host}'
            }
        }
        stage('Integration Tests on Staging') {
            steps {
                echo 'Run integration tests on the staging server'
            }
            post{
                success{
                    mail to: 'isaac.an.thompson@gmail.com',
                    subject: 'Integration Tests on Staging Status',
                    body: 'Integration tests on staging were a success'
                }
                failure{
                    mail to: 'isaac.an.thompson@gmail.com',
                    subject: 'Integration Tests on Staging Status',
                    body: 'Integrating tests on staging was a failure'
                }
            }
        }
        stage('Deploy to Production') {
            steps {
                echo 'Deploy to production server'
            }
        }
    }
}
